{"name":"Vk.api","tagline":"Vkontakte standalone php api","body":"vk.api\r\n======\r\n\r\nРабота с API Вконтакте для StandAlone приложений на языке php.\r\n\r\nДля работы с api вам необходимо выполнить несколько действий:\r\n\r\n1. Создать **\"Standalone-приложение\"** https://vk.com/editapp?act=create\r\n2. Получить access_token (об этом ниже)\r\n3. Классу нужно передать **client_id** приложения и секретный ключ который вам даётся при создании приложения\r\n\r\n## Получение access_token\r\n\r\nВыполним метод get_code_token для получения ссылки которая вернёт нам code\r\n\r\n```php\r\n\tinclude('vk.api.php');\r\n\t$v = new Vk($config);\r\n\t$url = $v->get_code_token();\r\n\t\r\n\techo $url;\r\n```\r\n\r\nПеременная **$url** будет содержать ссылку при переходе на которую вас попросят авторизоваться и предоставить права приложению, после чего вас перекинут на пустую страницу и в URL будет code=<нужный код>.\r\n\r\nДля получения токена и **owner_id** выполните метод **get_token()**\r\n\r\n```php\r\n\t$response = $v->get_token('ff604712f10b2b6ac0');\r\n\t\r\n\tvar_dump($response);\r\n```\r\n\r\n## Выполнение Api\r\n\r\nДля выполнения определённых Api вам необходимы на это права, для этого при создании токена нужно указать нужные scope.\r\n\r\n```php\r\n\t$config['secret_key'] = 'ваш секретный ключ приложения';\r\n\t$config['client_id'] = 0; // номер приложения\r\n\t$config['user_id'] = 0; // id текущего пользователя (не обязательно)\r\n\t$config['access_token'] = 'ваш токен доступа';\r\n\t$config['scope'] = 'wall,photos,video'; // права доступа к методам (для генерации токена)\r\n\t\r\n\t$v = new Vk($config);\r\n\t\r\n\t// пример публикации сообщения на стене пользователя\r\n\t// значения массива соответствуют значениям в Api https://vk.com/dev/wall.post\r\n\t\r\n\t$response = $v->api('wall.post', array('message' => 'I testing API form https://github.com/fdcore/vk.api'));\r\n```\r\n\r\n## Заливка файлов\r\n\r\nДля заливки файлов в данный момент есть 3 метода:\r\n\r\n- Загрузка видеозаписей **$v->upload_video()**\r\n- Загрузка фотографий на стену пользователя **$v->upload_photo()**\r\n- Загрузка документов **$v->upload_doc()**\r\n\r\n### Пример загрузки фото\r\n\r\n```php\r\n    // загрузка фото на сервер\r\n    $attachments = $v->upload_photo(0, array('4b67bhWrc4g.jpg', 'n52W2BdXdYE.jpg'));\r\n\r\n    // публикация на стене\r\n    $response = $v->api('wall.post', array('message'=>'я публикую фотографии', 'attachments' => implode(',', $attachments)));\r\n\r\n```\r\n\r\n### Пример загрузки видео\r\n\r\n```php\r\n\r\n   // встраивание видео с YouTube без заливки\r\n\r\n   $attach_video = $v->upload_video(array(\r\n       'link'=>'http://www.youtube.com/watch?v=5ZeA4AMrcd8',\r\n       'title' => 'Tasogare Otome X Amnesia / OST (Nika Lenina Russian Version)',\r\n       'description' => \"Трек оригинал: Hiiragi Nao - Requiem\",\r\n       'wallpost' => 1\r\n   ));\r\n\r\n   // заливка видео на VK.com\r\n\r\n   $attach_name = $v->upload_video(\r\n       array('name' => 'Fadoo Sama',\r\n           'description' => 'AMV',\r\n           'wallpost' => 1,\r\n           'group_id' => 0\r\n       ), '04975.Fadoo-Sama-DUALITY.amvnews.ru.mp4');\r\n\r\n```\r\n\r\n### Пример загрузки документа\r\n\r\n```php\r\n    $attach_doc_file = $v->upload_doc(0, 'iZKE4JdP4Q0mT.jpg');\r\n\r\n    if ( is_string($attach_doc_file) ) echo $attach_doc_file;\r\n\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}